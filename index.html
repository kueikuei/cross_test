
<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>

        // $(document).ready(function () {
        //     $("button").click(function () {
        //         $("#div1").load("demo_test.txt");
        //     });
        // });

        // var head = document.getElementsByTagName('body');
        // head[0].innerHTML = '<object id="t" type=text/html data='+html_file+'></object>';

        //insert demo.html'dom into index.html's body
        // var get_h1 = $('body h1').html();
        // console.log($('h1').html()); 

        var MagicText = function(text) {
            this.text = text;
        };

        // MagicText.prototype.load = function(html_file,cb) {
        //     $("head").load(html_file);//html_file = 'demo.html'

        //     $(document).ready(function () {
        //         var demo = $('head h1').html();
        //         // console.log(get_h1); 
        //         cb(demo);
        //     })

        // };

        MagicText.prototype.load = function(html_file) {

            var dfd = $.Deferred();
            
            $('head').load(html_file);
            console.log('順利讀取檔案');
            dfd.resolve();

            // if($('head').load(html_file)){
            //     dfd.resolve();
            //     console.log('順利讀取檔案');
            // }else{
            //     dfd.reject();
            //     console.log('讀取檔案失敗');
            // }

            return dfd.promise();
        };

        MagicText.prototype.load_fail = function(){
            dfd.reject();
            console.log('讀取檔案失敗');

            return dfd.promise();
        }

        $.when($.ajax( "/cross_test/demo.html" ))
            .then(MagicText.load,MagicText.load_fail);

        // $(document).ready(function () {
        //     var get_h1 = $('head h1').html();
        //     console.log(get_h1); 
        // })

        
    </script>
</head>
<body>
    <script>
        // $("head").load("demo.html");

        var magicText = new MagicText('hello world');

        function myRender(demo){
            alert(demo);
            // console.log('myRender function is working');
        }

        // magicText
        //     .load('demo.html');


        // magicText.load('demo.html',myRender);
    </script>
    <!-- <h1>Hello Kitty</h1> -->
    <!-- <div id="div1"><h2>Let jQuery AJAX Change This Text</h2></div> -->
    <!-- <button>Get External Content</button> -->

</body>
</html>